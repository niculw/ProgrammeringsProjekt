#include <eZ8.h>             // special encore constants, macros and flash routines
#include <sio.h>             // special encore serial i/o routines

#include "ansi.h"
#include "defines.h"
#include "initLevel.h"

void drawBorder( int style ){ 
	int x, y, i;
	int a[3][2] = {{218, 191} , {201, 187} , {220, 220}}; // border styles
	switch (style) {
		case 0 :
			x = 196;     
			y = 179;
			break;
		    // højrne top v, top h
		case 1 :
			x = 205;
			y = 186; 
			break;
	    	// højrne top v, top h
		case 2 : 
			x = 220;
			y = 219;
			break;
	}
	for (i = 2; i < 61; i++){
		gotoxy( 1, i);
		printf("%c",y);
		gotoxy( RESOLUTION_X, i);
		printf("%c",y);
	}
	gotoxy( 2,1 );
	for (i = 1 + 1; i < RESOLUTION_X; i++){
		printf("%c",x);	
	}
	gotoxy(1, 1);
	printf("%c", a[style][0]);
	gotoxy(RESOLUTION_X, 1);
	printf("%c", a[style][1]);
}

void initLevel( char block[25][22] , short level ){
	int i,j;
	switch ( level ) {
		case 1 :
			for (i = 0; i < 25; i++){
				for (j = 0; j < 22; j++){
					block[i][j] = LEVEL_1[i][j];
				}
			}
			break;
		case 2 :
			for (i = 0; i < 25; i++){
				for (j = 0; j < 22; j++){
				//	block[i][j] = LEVEL_2[i][j];
				}
			}
			break;
		case 3 :
				
			break;
	}
}

void printBlocks( char block[25][22] ) {
	int i,j,k;
	reverse('o');
	gotoxy( 2 , 2 );
	for ( i = 0 ; i < 23 ; i++ ){
		for ( j = 0 ; j < 20 ; j++ ){
			if ( block[i + 1][j + 1] && 0x01 == 0x01 ){		// tjek om blokken er aktiv 
				color( ( block[i + 1][j + 1] >> 4 ) , 0);		// sætter farven på blokken
				gotoxy( 2 + ( j << 3 ) , 2 + (i << 1)  );	// går til blok position
				for (k = 0; k < 8; k++){					
					printf(" ");							// farver den øverste del af blokken
				}
				gotoxy( 2 + ( j << 3 ) , 2 + (i << 1) + 1 );
				for (k = 0; k < 8; k++){
					printf(" ");							//// farver den nederste del af blokken
				}
			}
		}
	}
	reverse('p');
}
////////////////////////////////////////////////////////////////
/// 	IMPORTANT --  LEVEL DESIGN
///  following requiments should be met when designing a new level
///  - first and last lines should be pure 0x00
///  - first and last collum should be pure 0x00
///  otherwise block collision detection would respond unexpectily
///  because it would check outside of the array size
////////////////////////////////////////////////////////////////
const unsigned char LEVEL_1[25][22]= {
//		0	1	2	3	  4		5	6	 7		8	9	10	11	  12	13	14	15	  16	17	18	19	  20    21
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 0					
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 5
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 
	{0x00,0x31,0x41,0x51,0x61,0x71,0x11,0x21,0x31,0x41,0x51,0x61,0x71,0x11,0x21,0x31,0x41,0x51,0x61,0x71,0x11,0x00},		// 10
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 15
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 20
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 24
};
/*
const unsigned char LEVEL_2[25][22]= {
//		0	1	2	3	  4		5	6	 7		8	9	10	11	  12	13	14	15	  16	17	18	19
	{0x11,0x00,0x00,0x00,0x51,0x00,0x00,0x61,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 0					
	{0x00,0x11,0x00,0x00,0x00,0x51,0x00,0x00,0x61,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 
	{0x00,0x00,0x11,0x00,0x00,0x00,0x51,0x00,0x00,0x61,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 
	{0x00,0x00,0x00,0x11,0x00,0x00,0x00,0x51,0x00,0x00,0x61,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 
	{0x71,0x00,0x00,0x00,0x11,0x00,0x00,0x00,0x51,0x00,0x00,0x61,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 
	{0x00,0x71,0x00,0x00,0x00,0x11,0x00,0x00,0x00,0x51,0x00,0x00,0x61,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 5
	{0x00,0x00,0x71,0x00,0x00,0x00,0x11,0x00,0x00,0x00,0x51,0x00,0x00,0x61,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 
	{0x00,0x00,0x00,0x71,0x00,0x00,0x00,0x11,0x00,0x00,0x00,0x51,0x00,0x00,0x61,0x00,0x00,0x00,0x00,0x00,0x00,0x00},		// 
	{0x00,0x00,0x00,0x00,0x71,0x00,0x00,0x00,0x11,0x00,0x00,0x00,0x51,0x00,0x00,0x61,0x00,0x00,0x00,0x00,0x00,0x00},		// 
	{0x21,0x00,0x00,0x00,0x00,0x71,0x00,0x00,0x00,0x11,0x00,0x00,0x00,0x51,0x00,0x00,0x61,0x00,0x00,0x00,0x00,0x00},		// 
	{0x00,0x21,0x00,0x00,0x00,0x00,0x71,0x00,0x00,0x00,0x11,0x00,0x00,0x00,0x51,0x00,0x00,0x61,0x00,0x00,0x00,0x00},		// 10
	{0x00,0x00,0x21,0x00,0x00,0x00,0x00,0x71,0x00,0x00,0x00,0x11,0x00,0x00,0x00,0x51,0x00,0x00,0x61,0x00,0x00,0x00},		// 
	{0x31,0x00,0x00,0x21,0x00,0x00,0x00,0x00,0x71,0x00,0x00,0x00,0x11,0x00,0x00,0x00,0x51,0x00,0x00,0x61,0x00,0x00},		// 
	{0x00,0x31,0x00,0x00,0x21,0x00,0x00,0x00,0x00,0x71,0x00,0x00,0x00,0x11,0x00,0x00,0x00,0x51,0x00,0x00,0x00,0x00},		// 
	{0x00,0x00,0x31,0x00,0x00,0x21,0x00,0x00,0x00,0x00,0x71,0x00,0x00,0x00,0x11,0x00,0x00,0x00,0x51,0x00,0x00,0x00},		// 
	{0x41,0x00,0x00,0x31,0x00,0x00,0x21,0x00,0x00,0x00,0x00,0x71,0x00,0x00,0x00,0x11,0x00,0x00,0x00,0x51,0x00,0x00},		// 15
	{0x00,0x41,0x00,0x00,0x31,0x00,0x00,0x21,0x00,0x00,0x00,0x00,0x71,0x00,0x00,0x00,0x11,0x00,0x00,0x00,0x00,0x00},		// 
	{0x00,0x00,0x41,0x00,0x00,0x31,0x00,0x00,0x21,0x00,0x00,0x00,0x00,0x71,0x00,0x00,0x00,0x11,0x00,0x00,0x00,0x00},		// 
	{0x00,0x00,0x00,0x41,0x00,0x00,0x31,0x00,0x00,0x21,0x00,0x00,0x00,0x00,0x71,0x00,0x00,0x00,0x11,0x00,0x00,0x00},		// 
	{0x00,0x00,0x00,0x00,0x41,0x00,0x00,0x31,0x00,0x00,0x21,0x00,0x00,0x00,0x00,0x71,0x00,0x00,0x00,0x11,0x00,0x00},		// 
	{0x00,0x00,0x00,0x00,0x00,0x41,0x00,0x00,0x31,0x00,0x00,0x21,0x00,0x00,0x00,0x00,0x71,0x00,0x00,0x00,0x00,0x00},		// 20
	{0x00,0x00,0x00,0x00,0x00,0x00,0x41,0x00,0x00,0x31,0x00,0x00,0x21,0x00,0x00,0x00,0x00,0x71,0x00,0x00,0x00,0x00},		// 
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x41,0x00,0x00,0x31,0x00,0x00,0x21,0x00,0x00,0x00,0x00,0x71,0x00,0x00,0x00},		// 
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x41,0x00,0x00,0x31,0x00,0x00,0x21,0x00,0x00,0x00,0x00,0x71,0x00,0x00},		// 
	{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x41,0x00,0x00,0x31,0x00,0x00,0x21,0x00,0x00,0x00,0x00,0x00,0x00},		// 24
};
*/
